<div class="wrapper wrapper--bg-{{inkService.currentBackground}}">
    <div class="action-bar">
        <div class="action-bar__left">
        </div>
        <div class="action-bar__right">
        </div>
    </div>
    <div class="container">
        <ng-container [ngSwitch]="inkService.currentAccent">
            <img class="accent" *ngSwitchCase="'stars'" alt="" src="../assets/img/bg-stars.svg" />
            <ng-container *ngSwitchDefault></ng-container>
        </ng-container>
        <div class="reader reader--{{inkService.currentMode}} reader--cols-{{inkService.numColumns}}">
            @if (inkService.numColumns === 2) {
                <div class="reader--left">
                    <div class="text-wrapper" [@fadeIn]="inkService.groups['left']?.length">
                        @for (line of inkService.groups['left']; track line.content) {
                            <ng-container [ngSwitch]="line.type">
                                <div
                                    class="text"
                                    [innerHTML]="line.content"
                                    *ngSwitchDefault>
                                </div>
                                <taco-illustration
                                    class="text"
                                    illustration="{{line.content}}"
                                    size="xxxxxlg"
                                    *ngSwitchCase="'illustration'"
                                ></taco-illustration>
        
                            </ng-container>
                        }
                    </div>
                </div>
            } @else {
                <div></div>
            }
            <div class="reader--right">
                <ng-container [ngTemplateOutlet]="main"></ng-container>
            </div>
        </div>
        
    </div>    
</div>

<ng-template #main>
    <div class="text-wrapper" [@fadeIn]="inkService.groups['right']?.length">
        @for (line of inkService.groups['right']; track line.content) {
            <ng-container [ngSwitch]="line.type">
                <div
                    class="text"
                    [innerHTML]="line.content"
                    *ngSwitchDefault>
                </div>
                <taco-illustration
                    class="text"
                    illustration="{{line.content}}"
                    size="xxxxlg"
                    *ngSwitchCase="'illustration'"
                ></taco-illustration>
            </ng-container>
        }
    </div>
    <app-choice-list
        [mode]="inkService.currentChoiceMode"
        [choices]="inkService.currentChoices"
        [attr.alignment]="inkService.currentMode === 'text' ? 'left' : 'center'"
        (handleChoice)="inkService.SelectChoice($event)"
    ></app-choice-list>
</ng-template>
